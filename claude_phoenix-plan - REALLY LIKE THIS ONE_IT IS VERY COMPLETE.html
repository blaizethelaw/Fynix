<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phoenix Daily - Complete Financial System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --phoenix-orange: #ff6b35;
            --phoenix-red: #ee5a24;
            --phoenix-yellow: #ffc93c;
            --phoenix-gold: #ffa502;
            --phoenix-dark: #0a0e27;
            --glass-white: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --success: #00d2d3;
            --warning: #ff9800;
            --danger: #ff4757;
            --info: #54a0ff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1e3c72 50%, #2a5298 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        #bgCanvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.3;
        }

        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Setup Wizard */
        .setup-wizard {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            display: none;
        }

        .setup-wizard.active {
            display: flex;
        }

        .wizard-content {
            background: linear-gradient(135deg, var(--phoenix-dark), #1a1a2e);
            border-radius: 30px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: var(--glass-white);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 10px;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
        }

        .nav-tab:hover {
            background: rgba(255, 107, 53, 0.2);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--phoenix-orange), var(--phoenix-red));
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }

        .nav-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            background: var(--glass-white);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid var(--glass-border);
            position: relative;
        }

        .phoenix-logo {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            animation: phoenixRise 3s ease-in-out infinite;
        }

        @keyframes phoenixRise {
            0%, 100% { transform: translateY(0) rotate(0deg) scale(1); }
            50% { transform: translateY(-10px) rotate(5deg) scale(1.05); }
        }

        h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--phoenix-orange), var(--phoenix-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        /* Income Overview Bar */
        .income-overview {
            background: linear-gradient(135deg, rgba(0, 210, 211, 0.1), rgba(84, 160, 255, 0.1));
            border: 1px solid rgba(0, 210, 211, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }

        .income-stat {
            text-align: center;
        }

        .income-stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .income-stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--success);
        }

        /* Budget Health Indicator */
        .budget-health {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .health-indicator {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .health-good { background: linear-gradient(135deg, #00d2d3, #00a8a9); }
        .health-warning { background: linear-gradient(135deg, #ff9800, #ff6b35); }
        .health-danger { background: linear-gradient(135deg, #ff4757, #ee5a24); }

        /* Cards */
        .glass-card {
            background: var(--glass-white);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            padding: 30px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(255, 107, 53, 0.1);
        }

        .card-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--phoenix-yellow);
        }

        /* Forms */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .required {
            color: var(--phoenix-orange);
        }

        input, select, textarea {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 15px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--phoenix-orange);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
        }

        .btn {
            background: linear-gradient(135deg, var(--phoenix-orange), var(--phoenix-red));
            border: none;
            border-radius: 10px;
            padding: 14px 28px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 53, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Interactive Guide Cards */
        .guide-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .guide-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 107, 53, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .guide-card:hover::before {
            left: 100%;
        }

        .guide-card:hover {
            background: rgba(255, 107, 53, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.2);
        }

        .guide-progress {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .progress-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
        }

        .progress-dot.completed {
            background: var(--success);
        }

        /* Interactive Calculators */
        .calculator-widget {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .calculator-result {
            font-size: 2rem;
            font-weight: 700;
            color: var(--phoenix-yellow);
            text-align: center;
            margin-top: 20px;
        }

        /* Budget Breakdown */
        .budget-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .breakdown-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .breakdown-item:hover {
            transform: scale(1.05);
            background: rgba(255, 107, 53, 0.1);
        }

        .breakdown-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .breakdown-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .breakdown-percentage {
            font-size: 0.8rem;
            color: var(--phoenix-orange);
            margin-top: 5px;
        }

        /* Progress Bars */
        .progress-container {
            margin: 20px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--phoenix-orange), var(--phoenix-yellow));
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Charts Container */
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--phoenix-orange), var(--phoenix-red));
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            z-index: 3000;
            animation: slideInRight 0.5s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--phoenix-dark), #1a1a2e);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            color: var(--phoenix-orange);
            transform: rotate(90deg);
        }

        /* Interactive Elements */
        .interactive-box {
            background: rgba(255, 107, 53, 0.1);
            border: 2px dashed var(--phoenix-orange);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .interactive-box:hover {
            background: rgba(255, 107, 53, 0.2);
            border-style: solid;
        }

        /* Linked Tags */
        .link-tag {
            display: inline-block;
            background: rgba(255, 107, 53, 0.2);
            border: 1px solid var(--phoenix-orange);
            border-radius: 20px;
            padding: 5px 15px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .link-tag:hover {
            background: var(--phoenix-orange);
            transform: scale(1.05);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .app-container {
                padding: 10px;
            }
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: rgba(0, 0, 0, 0.9);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Success States */
        .success-animation {
            animation: successPulse 0.5s ease;
        }

        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <canvas id="bgCanvas"></canvas>
    
    <!-- Setup Wizard (First Time) -->
    <div id="setupWizard" class="setup-wizard">
        <div class="wizard-content">
            <h2 style="color: var(--phoenix-yellow); margin-bottom: 20px;">Welcome to Your Phoenix Journey! üî•</h2>
            <p style="margin-bottom: 30px;">Let's set up your financial profile to get personalized insights.</p>
            
            <form id="setupForm">
                <div class="form-group">
                    <label>Your Name</label>
                    <input type="text" id="setupName" placeholder="Enter your name" required>
                </div>
                
                <div class="form-group">
                    <label>Monthly Income After Taxes & Garnishment <span class="required">*</span></label>
                    <input type="number" id="setupIncome" placeholder="What actually hits your bank account" required>
                </div>
                
                <div class="form-group">
                    <label>Income Type</label>
                    <select id="setupIncomeType" required>
                        <option value="salary">Salaried (Consistent)</option>
                        <option value="hourly">Hourly (Variable)</option>
                        <option value="contract">Contract/Freelance</option>
                        <option value="multiple">Multiple Sources</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Current Financial Goal</label>
                    <select id="setupGoal" required>
                        <option value="emergency">Build Emergency Fund</option>
                        <option value="debt">Eliminate Debt</option>
                        <option value="credit">Rebuild Credit Score</option>
                        <option value="save">Save for Major Purchase</option>
                        <option value="invest">Start Investing</option>
                    </select>
                </div>
                
                <button type="submit" class="btn" style="width: 100%; margin-top: 20px;">
                    Start My Phoenix Plan
                </button>
            </form>
        </div>
    </div>
    
    <div class="app-container">
        <header class="header">
            <div class="phoenix-logo">
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="phoenixGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#ff6b35;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#ffc93c;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#ff6b35;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="M50 10 C30 20, 20 40, 25 50 C15 45, 10 55, 15 65 C10 60, 5 70, 10 80 C20 75, 30 70, 40 70 L50 90 L60 70 C70 70, 80 75, 90 80 C95 70, 90 60, 85 65 C90 55, 85 45, 75 50 C80 40, 70 20, 50 10 Z" 
                          fill="url(#phoenixGrad)" 
                          stroke="rgba(255,255,255,0.3)" 
                          stroke-width="1"/>
                </svg>
            </div>
            <h1>Phoenix Daily</h1>
            <p class="tagline">Welcome back, <span id="userName">Friend</span>! Ready to rise? üî•</p>
        </header>

        <!-- Income Overview -->
        <div class="income-overview" id="incomeOverview">
            <div class="income-stat">
                <div class="income-stat-label">Monthly Income</div>
                <div class="income-stat-value" id="monthlyIncomeDisplay">$0</div>
            </div>
            <div class="income-stat">
                <div class="income-stat-label">Daily Budget</div>
                <div class="income-stat-value" id="dailyBudgetDisplay">$0</div>
            </div>
            <div class="income-stat">
                <div class="income-stat-label">Available After Expenses</div>
                <div class="income-stat-value" id="availableDisplay">$0</div>
            </div>
            <div class="income-stat">
                <div class="income-stat-label">Expense Ratio</div>
                <div class="income-stat-value" id="ratioDisplay">0%</div>
            </div>
        </div>

        <!-- Budget Health Indicator -->
        <div class="budget-health" id="budgetHealth">
            <div class="health-indicator health-good" id="healthIndicator">‚úì</div>
            <div>
                <div style="font-size: 1.2rem; font-weight: 600;" id="healthStatus">Budget Status: Healthy</div>
                <div style="color: var(--text-secondary);" id="healthMessage">You're on track! Keep it up!</div>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <div class="nav-tab active" onclick="switchTab('dashboard')">
                üìä Dashboard
            </div>
            <div class="nav-tab" onclick="switchTab('income')">
                üí∞ Income & Budget
                <span class="nav-badge" id="incomeBadge" style="display: none;">!</span>
            </div>
            <div class="nav-tab" onclick="switchTab('expenses')">
                üìù Expenses
            </div>
            <div class="nav-tab" onclick="switchTab('guides')">
                üìö Interactive Guides
            </div>
            <div class="nav-tab" onclick="switchTab('tools')">
                üõ†Ô∏è Tools & Calculators
            </div>
            <div class="nav-tab" onclick="switchTab('progress')">
                üìà My Progress
            </div>
        </nav>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="glass-card">
                <h2 class="card-title">üíé Your Financial Snapshot</h2>
                
                <div class="budget-breakdown" id="budgetBreakdown">
                    <div class="breakdown-item">
                        <div class="breakdown-label">Four Walls</div>
                        <div class="breakdown-value" id="fourWallsTotal">$0</div>
                        <div class="breakdown-percentage">0% of income</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">Debt Payments</div>
                        <div class="breakdown-value" id="debtTotal">$0</div>
                        <div class="breakdown-percentage">0% of income</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">Savings</div>
                        <div class="breakdown-value" id="savingsTotal">$0</div>
                        <div class="breakdown-percentage">0% of income</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">Other</div>
                        <div class="breakdown-value" id="otherTotal">$0</div>
                        <div class="breakdown-percentage">0% of income</div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="budgetChart"></canvas>
                </div>
            </div>

            <div class="glass-card">
                <h2 class="card-title">üéØ Quick Actions</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <button class="btn" onclick="switchTab('income')">Update Income</button>
                    <button class="btn btn-secondary" onclick="switchTab('expenses')">Add Expense</button>
                    <button class="btn btn-secondary" onclick="openGuide('emergency')">Build Emergency Fund</button>
                    <button class="btn btn-secondary" onclick="switchTab('tools')">Calculate Daily Cost</button>
                </div>
            </div>
        </div>

        <!-- Income & Budget Tab -->
        <div id="income" class="tab-content">
            <div class="glass-card">
                <h2 class="card-title">üíº Income Sources</h2>
                
                <form id="incomeForm" class="form-grid">
                    <div class="form-group">
                        <label>Primary Income (After Tax & Garnishment) <span class="required">*</span></label>
                        <input type="number" id="primaryIncome" placeholder="Monthly take-home pay" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Income Type</label>
                        <select id="incomeType" onchange="updateIncomeFields()">
                            <option value="salary">Salaried (Fixed)</option>
                            <option value="hourly">Hourly (Variable)</option>
                            <option value="contract">Contract/Freelance</option>
                            <option value="multiple">Multiple Sources</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="hourlyFields" style="display: none;">
                        <label>Average Hours/Week</label>
                        <input type="number" id="hoursPerWeek" placeholder="40">
                    </div>
                    
                    <div class="form-group" id="hourlyFields2" style="display: none;">
                        <label>Hourly Rate (After Tax)</label>
                        <input type="number" id="hourlyRate" placeholder="15.00" step="0.01">
                    </div>
                    
                    <div class="form-group">
                        <label>Side Income (Optional)</label>
                        <input type="number" id="sideIncome" placeholder="Additional monthly income">
                    </div>
                    
                    <div class="form-group">
                        <label>Pay Frequency</label>
                        <select id="payFrequency">
                            <option value="monthly">Monthly</option>
                            <option value="biweekly">Bi-Weekly</option>
                            <option value="weekly">Weekly</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn full-width">Calculate My Budget</button>
                </form>
            </div>

            <div class="glass-card" id="budgetResults" style="display: none;">
                <h2 class="card-title">üìä Your Zero-Based Budget</h2>
                
                <div class="calculator-widget">
                    <h3>Income Breakdown</h3>
                    <div class="budget-breakdown">
                        <div class="breakdown-item">
                            <div class="breakdown-label">Monthly</div>
                            <div class="breakdown-value" id="monthlyCalc">$0</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">Bi-Weekly</div>
                            <div class="breakdown-value" id="biweeklyCalc">$0</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">Weekly</div>
                            <div class="breakdown-value" id="weeklyCalc">$0</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">Daily</div>
                            <div class="breakdown-value" id="dailyCalc">$0</div>
                        </div>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-header">
                        <span>Budget Allocation</span>
                        <span id="allocationPercent">0% Allocated</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="allocationBar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Expenses Tab -->
        <div id="expenses" class="tab-content">
            <div class="glass-card">
                <h2 class="card-title">üí≥ Add Expense</h2>
                
                <form id="expenseForm" class="form-grid">
                    <div class="form-group">
                        <label>Expense Name <span class="required">*</span></label>
                        <input type="text" id="expenseName" placeholder="e.g., Rent, Car Payment" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Amount <span class="required">*</span></label>
                        <input type="number" id="expenseAmount" placeholder="Monthly amount" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Category <span class="required">*</span></label>
                        <select id="expenseCategory" required>
                            <option value="">Select Category</option>
                            <optgroup label="Four Walls (Priority)">
                                <option value="Housing">üè† Housing</option>
                                <option value="Food">üçî Food</option>
                                <option value="Utilities">üí° Utilities</option>
                                <option value="Transportation">üöó Transportation</option>
                            </optgroup>
                            <optgroup label="Other Expenses">
                                <option value="Insurance">üõ°Ô∏è Insurance</option>
                                <option value="Debt">üí≥ Debt Payment</option>
                                <option value="Healthcare">üè• Healthcare</option>
                                <option value="Personal">üë§ Personal</option>
                                <option value="Entertainment">üéÆ Entertainment</option>
                                <option value="Savings">üí∞ Savings</option>
                                <option value="Other">üì¶ Other</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Due Date</label>
                        <input type="number" id="expenseDueDate" placeholder="Day of month (1-31)" min="1" max="31">
                    </div>
                    
                    <div class="form-group">
                        <label>Priority</label>
                        <select id="expensePriority">
                            <option value="essential">Essential (Four Walls)</option>
                            <option value="high">High Priority</option>
                            <option value="medium">Medium Priority</option>
                            <option value="low">Low Priority</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Notes</label>
                        <input type="text" id="expenseNotes" placeholder="Optional notes">
                    </div>
                    
                    <button type="submit" class="btn full-width">Add to Budget</button>
                </form>
            </div>

            <div class="glass-card">
                <h2 class="card-title">üìã Your Expenses</h2>
                <div id="expensesList"></div>
            </div>
        </div>

        <!-- Interactive Guides Tab -->
        <div id="guides" class="tab-content">
            <div class="glass-card">
                <h2 class="card-title">üéì Interactive Financial Guides</h2>
                <p style="margin-bottom: 20px;">Click any guide to start your interactive journey!</p>
                
                <div class="guide-card" onclick="openInteractiveGuide('phoenix-method')">
                    <h3 style="color: var(--phoenix-yellow);">üî• The Phoenix Method: Complete System</h3>
                    <p>Master the entire financial recovery system with interactive exercises, calculators, and personalized action plans.</p>
                    <div class="guide-progress">
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                        <div class="progress-dot"></div>
                    </div>
                </div>

                <div class="guide-card" onclick="openInteractiveGuide('emergency-fund')">
                    <h3 style="color: var(--success);">üí∞ Emergency Fund Builder</h3>
                    <p>Interactive calculator and savings tracker. Set your $1,000 goal and track daily progress.</p>
                    <div class="link-tag" onclick="switchTab('tools'); event.stopPropagation();">Calculator</div>
                    <div class="link-tag" onclick="openInteractiveGuide('debt'); event.stopPropagation();">Next: Debt</div>
                </div>

                <div class="guide-card" onclick="openInteractiveGuide('credit-repair')">
                    <h3 style="color: var(--info);">üìà Credit Score Recovery Lab</h3>
                    <p>Interactive credit simulator, dispute letter generator, and 12-month action plan tracker.</p>
                    <div class="link-tag" onclick="openInteractiveGuide('debt'); event.stopPropagation();">Related: Debt</div>
                </div>

                <div class="guide-card" onclick="openInteractiveGuide('debt')">
                    <h3 style="color: var(--warning);">‚öîÔ∏è Debt Elimination Strategy</h3>
                    <p>Compare Snowball vs Avalanche with our interactive calculator. Build your custom payoff plan.</p>
                    <div class="link-tag" onclick="switchTab('tools'); event.stopPropagation();">Debt Calculator</div>
                </div>

                <div class="guide-card" onclick="openInteractiveGuide('zero-budget')">
                    <h3 style="color: var(--phoenix-orange);">üìä Zero-Based Budget Workshop</h3>
                    <p>Live budget builder with real-time feedback. Every dollar gets a job!</p>
                    <div class="link-tag" onclick="switchTab('income'); event.stopPropagation();">Start Budget</div>
                </div>

                <div class="guide-card" onclick="openInteractiveGuide('investing')">
                    <h3 style="color: var(--phoenix-gold);">üöÄ Investment Basics</h3>
                    <p>Compound interest calculator, portfolio builder, and retirement planning tools.</p>
                    <div class="link-tag" onclick="openInteractiveGuide('emergency-fund'); event.stopPropagation();">Prerequisites</div>
                </div>
            </div>
        </div>

        <!-- Tools & Calculators Tab -->
        <div id="tools" class="tab-content">
            <div class="glass-card">
                <h2 class="card-title">üßÆ Daily Cost Calculator</h2>
                
                <div class="calculator-widget">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Monthly Amount</label>
                            <input type="number" id="quickMonthly" placeholder="Enter any monthly cost" oninput="calculateDaily()">
                        </div>
                    </div>
                    
                    <div class="calculator-result" id="dailyResult">
                        Enter an amount to see daily cost
                    </div>
                    
                    <div class="budget-breakdown" id="costBreakdown" style="display: none;">
                        <div class="breakdown-item">
                            <div class="breakdown-label">Daily</div>
                            <div class="breakdown-value" id="dailyBreak">$0</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">Weekly</div>
                            <div class="breakdown-value" id="weeklyBreak">$0</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">Hourly</div>
                            <div class="breakdown-value" id="hourlyBreak">$0</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-label">Yearly</div>
                            <div class="breakdown-value" id="yearlyBreak">$0</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h2 class="card-title">üí∏ Debt Payoff Calculator</h2>
                
                <div class="calculator-widget">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Total Debt</label>
                            <input type="number" id="debtAmount" placeholder="Total amount owed">
                        </div>
                        <div class="form-group">
                            <label>Interest Rate (%)</label>
                            <input type="number" id="debtRate" placeholder="APR" step="0.1">
                        </div>
                        <div class="form-group">
                            <label>Monthly Payment</label>
                            <input type="number" id="debtPayment" placeholder="How much can you pay?">
                        </div>
                        <button class="btn" onclick="calculateDebtPayoff()">Calculate Payoff Time</button>
                    </div>
                    
                    <div class="calculator-result" id="debtResult" style="display: none;">
                        <!-- Results will appear here -->
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <h2 class="card-title">üå± Compound Interest Calculator</h2>
                
                <div class="calculator-widget">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Initial Amount</label>
                            <input type="number" id="compoundInitial" placeholder="Starting amount">
                        </div>
                        <div class="form-group">
                            <label>Monthly Contribution</label>
                            <input type="number" id="compoundMonthly" placeholder="Monthly addition">
                        </div>
                        <div class="form-group">
                            <label>Annual Return (%)</label>
                            <input type="number" id="compoundRate" placeholder="Expected return" value="8">
                        </div>
                        <div class="form-group">
                            <label>Years</label>
                            <input type="number" id="compoundYears" placeholder="Investment period" value="10">
                        </div>
                        <button class="btn full-width" onclick="calculateCompound()">Calculate Growth</button>
                    </div>
                    
                    <div class="calculator-result" id="compoundResult" style="display: none;">
                        <!-- Results will appear here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Tab -->
        <div id="progress" class="tab-content">
            <div class="glass-card">
                <h2 class="card-title">üèÜ Your Phoenix Journey</h2>
                
                <div class="progress-container">
                    <div class="progress-header">
                        <span>Emergency Fund Progress</span>
                        <span id="emergencyProgress">$0 / $1,000</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="emergencyBar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-header">
                        <span>Monthly Budget Completion</span>
                        <span id="budgetProgress">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="budgetBar" style="width: 0%"></div>
                    </div>
                </div>

                <div class="progress-container">
                    <div class="progress-header">
                        <span>Guides Completed</span>
                        <span id="guidesProgress">0 / 6</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="guidesBar" style="width: 0%"></div>
                    </div>
                </div>

                <h3 style="margin-top: 30px; color: var(--phoenix-yellow);">üéØ Milestones</h3>
                <div style="display: grid; gap: 10px; margin-top: 20px;">
                    <div class="interactive-box" id="milestone1">
                        ‚úÖ Set up income and budget
                    </div>
                    <div class="interactive-box" id="milestone2">
                        ‚¨ú Build $1,000 emergency fund
                    </div>
                    <div class="interactive-box" id="milestone3">
                        ‚¨ú Pay off smallest debt
                    </div>
                    <div class="interactive-box" id="milestone4">
                        ‚¨ú Reach 650 credit score
                    </div>
                    <div class="interactive-box" id="milestone5">
                        ‚¨ú Start investing (even $25/month)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Interactive Guide Modal -->
    <div id="guideModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // State Management
        let userData = {
            name: '',
            income: 0,
            incomeType: 'salary',
            expenses: [],
            goals: [],
            progress: {
                emergencyFund: 0,
                guidesCompleted: [],
                milestones: []
            }
        };

        // Load saved data
        function loadUserData() {
            const saved = localStorage.getItem('phoenixUserData');
            if (saved) {
                userData = JSON.parse(saved);
                document.getElementById('setupWizard').classList.remove('active');
                updateUI();
            } else {
                document.getElementById('setupWizard').classList.add('active');
            }
        }

        // Save data
        function saveUserData() {
            localStorage.setItem('phoenixUserData', JSON.stringify(userData));
        }

        // Setup form
        document.getElementById('setupForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            userData.name = document.getElementById('setupName').value;
            userData.income = parseFloat(document.getElementById('setupIncome').value);
            userData.incomeType = document.getElementById('setupIncomeType').value;
            userData.goal = document.getElementById('setupGoal').value;
            
            saveUserData();
            document.getElementById('setupWizard').classList.remove('active');
            updateUI();
            showNotification('üéâ Welcome to Phoenix Daily!');
        });

        // Income form
        document.getElementById('incomeForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            userData.income = parseFloat(document.getElementById('primaryIncome').value);
            userData.incomeType = document.getElementById('incomeType').value;
            userData.sideIncome = parseFloat(document.getElementById('sideIncome').value) || 0;
            userData.payFrequency = document.getElementById('payFrequency').value;
            
            if (userData.incomeType === 'hourly') {
                userData.hoursPerWeek = parseFloat(document.getElementById('hoursPerWeek').value);
                userData.hourlyRate = parseFloat(document.getElementById('hourlyRate').value);
            }
            
            saveUserData();
            updateUI();
            document.getElementById('budgetResults').style.display = 'block';
            showNotification('‚úÖ Income updated successfully!');
        });

        // Expense form
        document.getElementById('expenseForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const expense = {
                id: Date.now(),
                name: document.getElementById('expenseName').value,
                amount: parseFloat(document.getElementById('expenseAmount').value),
                category: document.getElementById('expenseCategory').value,
                dueDate: parseInt(document.getElementById('expenseDueDate').value) || 1,
                priority: document.getElementById('expensePriority').value,
                notes: document.getElementById('expenseNotes').value,
                daily: parseFloat(document.getElementById('expenseAmount').value) / 30
            };
            
            userData.expenses.push(expense);
            saveUserData();
            updateUI();
            renderExpenses();
            
            e.target.reset();
            showNotification('‚úÖ Expense added to budget!');
        });

        // Update UI
        function updateUI() {
            // Update name
            document.getElementById('userName').textContent = userData.name || 'Friend';
            
            // Update income displays
            const totalIncome = userData.income + (userData.sideIncome || 0);
            document.getElementById('monthlyIncomeDisplay').textContent = `$${totalIncome.toFixed(2)}`;
            document.getElementById('dailyBudgetDisplay').textContent = `$${(totalIncome / 30).toFixed(2)}`;
            
            // Calculate expenses
            const totalExpenses = userData.expenses.reduce((sum, exp) => sum + exp.amount, 0);
            const available = totalIncome - totalExpenses;
            const ratio = totalIncome > 0 ? ((totalExpenses / totalIncome) * 100).toFixed(0) : 0;
            
            document.getElementById('availableDisplay').textContent = `$${available.toFixed(2)}`;
            document.getElementById('ratioDisplay').textContent = `${ratio}%`;
            
            // Update budget health
            updateBudgetHealth(ratio, available);
            
            // Update budget breakdown
            updateBudgetBreakdown();
            
            // Update progress
            updateProgress();
            
            // Check for income setup
            if (!userData.income) {
                document.getElementById('incomeBadge').style.display = 'block';
            } else {
                document.getElementById('incomeBadge').style.display = 'none';
            }
        }

        // Budget health indicator
        function updateBudgetHealth(ratio, available) {
            const indicator = document.getElementById('healthIndicator');
            const status = document.getElementById('healthStatus');
            const message = document.getElementById('healthMessage');
            
            if (ratio > 100) {
                indicator.className = 'health-indicator health-danger';
                indicator.textContent = '‚ö†';
                status.textContent = 'Budget Status: Over Budget!';
                message.textContent = `You're spending $${Math.abs(available).toFixed(2)} more than you earn!`;
            } else if (ratio > 90) {
                indicator.className = 'health-indicator health-warning';
                indicator.textContent = '!';
                status.textContent = 'Budget Status: Tight';
                message.textContent = 'Consider reducing expenses to build savings.';
            } else {
                indicator.className = 'health-indicator health-good';
                indicator.textContent = '‚úì';
                status.textContent = 'Budget Status: Healthy';
                message.textContent = `Great job! You have $${available.toFixed(2)} available for savings.`;
            }
        }

        // Budget breakdown
        function updateBudgetBreakdown() {
            const fourWalls = userData.expenses.filter(e => 
                ['Housing', 'Food', 'Utilities', 'Transportation'].includes(e.category)
            ).reduce((sum, e) => sum + e.amount, 0);
            
            const debt = userData.expenses.filter(e => e.category === 'Debt')
                .reduce((sum, e) => sum + e.amount, 0);
            
            const savings = userData.expenses.filter(e => e.category === 'Savings')
                .reduce((sum, e) => sum + e.amount, 0);
            
            const other = userData.expenses.filter(e => 
                !['Housing', 'Food', 'Utilities', 'Transportation', 'Debt', 'Savings'].includes(e.category)
            ).reduce((sum, e) => sum + e.amount, 0);
            
            const totalIncome = userData.income + (userData.sideIncome || 0);
            
            document.getElementById('fourWallsTotal').textContent = `$${fourWalls.toFixed(2)}`;
            document.getElementById('debtTotal').textContent = `$${debt.toFixed(2)}`;
            document.getElementById('savingsTotal').textContent = `$${savings.toFixed(2)}`;
            document.getElementById('otherTotal').textContent = `$${other.toFixed(2)}`;
            
            // Update percentages
            document.querySelectorAll('.breakdown-percentage').forEach((el, i) => {
                const values = [fourWalls, debt, savings, other];
                const percent = totalIncome > 0 ? ((values[i] / totalIncome) * 100).toFixed(0) : 0;
                el.textContent = `${percent}% of income`;
            });
            
            // Update chart
            updateBudgetChart(fourWalls, debt, savings, other);
        }

        // Chart
        function updateBudgetChart(fourWalls, debt, savings, other) {
            const ctx = document.getElementById('budgetChart');
            if (!ctx) return;
            
            if (window.budgetChart) {
                window.budgetChart.destroy();
            }
            
            window.budgetChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Four Walls', 'Debt', 'Savings', 'Other'],
                    datasets: [{
                        data: [fourWalls, debt, savings, other],
                        backgroundColor: [
                            'rgba(255, 107, 53, 0.8)',
                            'rgba(255, 201, 60, 0.8)',
                            'rgba(0, 210, 211, 0.8)',
                            'rgba(84, 160, 255, 0.8)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: 'white',
                                padding: 15,
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });
        }

        // Render expenses
        function renderExpenses() {
            const container = document.getElementById('expensesList');
            
            if (userData.expenses.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No expenses added yet.</p>';
                return;
            }
            
            // Group by priority
            const essential = userData.expenses.filter(e => e.priority === 'essential');
            const high = userData.expenses.filter(e => e.priority === 'high');
            const medium = userData.expenses.filter(e => e.priority === 'medium');
            const low = userData.expenses.filter(e => e.priority === 'low');
            
            let html = '';
            
            if (essential.length > 0) {
                html += '<h3 style="color: var(--danger); margin: 20px 0 10px;">üî¥ Essential (Four Walls)</h3>';
                html += essential.map(e => createExpenseCard(e)).join('');
            }
            
            if (high.length > 0) {
                html += '<h3 style="color: var(--warning); margin: 20px 0 10px;">üü° High Priority</h3>';
                html += high.map(e => createExpenseCard(e)).join('');
            }
            
            if (medium.length > 0) {
                html += '<h3 style="color: var(--info); margin: 20px 0 10px;">üîµ Medium Priority</h3>';
                html += medium.map(e => createExpenseCard(e)).join('');
            }
            
            if (low.length > 0) {
                html += '<h3 style="color: var(--text-secondary); margin: 20px 0 10px;">‚ö™ Low Priority</h3>';
                html += low.map(e => createExpenseCard(e)).join('');
            }
            
            container.innerHTML = html;
        }

        // Create expense card
        function createExpenseCard(expense) {
            return `
                <div class="interactive-box" style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 1.2rem; font-weight: 600;">${expense.name}</div>
                            <div style="color: var(--text-secondary);">
                                ${expense.category} ‚Ä¢ Due: Day ${expense.dueDate} ‚Ä¢ $${expense.daily.toFixed(2)}/day
                            </div>
                            ${expense.notes ? `<div style="font-size: 0.9rem; margin-top: 5px;">${expense.notes}</div>` : ''}
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 1.5rem; color: var(--phoenix-yellow);">$${expense.amount.toFixed(2)}</div>
                            <button class="btn btn-secondary" style="margin-top: 10px;" onclick="deleteExpense(${expense.id})">Remove</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Delete expense
        function deleteExpense(id) {
            userData.expenses = userData.expenses.filter(e => e.id !== id);
            saveUserData();
            updateUI();
            renderExpenses();
            showNotification('‚ùå Expense removed');
        }

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(nav => {
                nav.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.closest('.nav-tab').classList.add('active');
        }

        // Income type change
        function updateIncomeFields() {
            const type = document.getElementById('incomeType').value;
            const hourlyFields = document.querySelectorAll('#hourlyFields, #hourlyFields2');
            
            if (type === 'hourly') {
                hourlyFields.forEach(field => field.style.display = 'block');
            } else {
                hourlyFields.forEach(field => field.style.display = 'none');
            }
        }

        // Calculators
        function calculateDaily() {
            const monthly = parseFloat(document.getElementById('quickMonthly').value);
            if (!monthly) {
                document.getElementById('dailyResult').textContent = 'Enter an amount to see daily cost';
                document.getElementById('costBreakdown').style.display = 'none';
                return;
            }
            
            const daily = monthly / 30;
            const weekly = monthly / 4.33;
            const hourly = daily / 24;
            const yearly = monthly * 12;
            
            document.getElementById('dailyResult').innerHTML = `Just <span style="color: var(--success);">$${daily.toFixed(2)}</span> per day!`;
            document.getElementById('costBreakdown').style.display = 'grid';
            
            document.getElementById('dailyBreak').textContent = `$${daily.toFixed(2)}`;
            document.getElementById('weeklyBreak').textContent = `$${weekly.toFixed(2)}`;
            document.getElementById('hourlyBreak').textContent = `$${hourly.toFixed(2)}`;
            document.getElementById('yearlyBreak').textContent = `$${yearly.toFixed(0)}`;
        }

        function calculateDebtPayoff() {
            const amount = parseFloat(document.getElementById('debtAmount').value);
            const rate = parseFloat(document.getElementById('debtRate').value) / 100 / 12;
            const payment = parseFloat(document.getElementById('debtPayment').value);
            
            if (!amount || !rate || !payment) return;
            
            const months = Math.log(payment / (payment - amount * rate)) / Math.log(1 + rate);
            const totalPaid = payment * months;
            const interest = totalPaid - amount;
            
            document.getElementById('debtResult').style.display = 'block';
            document.getElementById('debtResult').innerHTML = `
                <h3>Payoff Timeline</h3>
                <div class="budget-breakdown">
                    <div class="breakdown-item">
                        <div class="breakdown-label">Time to Payoff</div>
                        <div class="breakdown-value">${Math.ceil(months)} months</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">Total Interest</div>
                        <div class="breakdown-value">$${interest.toFixed(2)}</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">Total Paid</div>
                        <div class="breakdown-value">$${totalPaid.toFixed(2)}</div>
                    </div>
                </div>
            `;
        }

        function calculateCompound() {
            const initial = parseFloat(document.getElementById('compoundInitial').value) || 0;
            const monthly = parseFloat(document.getElementById('compoundMonthly').value) || 0;
            const rate = parseFloat(document.getElementById('compoundRate').value) / 100;
            const years = parseFloat(document.getElementById('compoundYears').value);
            
            if (!years) return;
            
            const months = years * 12;
            const monthlyRate = rate / 12;
            
            let futureValue = initial * Math.pow(1 + monthlyRate, months);
            if (monthly > 0) {
                futureValue += monthly * ((Math.pow(1 + monthlyRate, months) - 1) / monthlyRate);
            }
            
            const totalContributed = initial + (monthly * months);
            const earnings = futureValue - totalContributed;
            
            document.getElementById('compoundResult').style.display = 'block';
            document.getElementById('compoundResult').innerHTML = `
                <h3>Your Money Will Grow To:</h3>
                <div class="calculator-result" style="color: var(--success);">
                    $${futureValue.toFixed(2)}
                </div>
                <div class="budget-breakdown">
                    <div class="breakdown-item">
                        <div class="breakdown-label">You Contributed</div>
                        <div class="breakdown-value">$${totalContributed.toFixed(2)}</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">Interest Earned</div>
                        <div class="breakdown-value" style="color: var(--success);">$${earnings.toFixed(2)}</div>
                    </div>
                </div>
            `;
        }

        // Interactive Guides
        function openInteractiveGuide(guide) {
            const modal = document.getElementById('guideModal');
            const content = document.getElementById('modalContent');
            
            const guides = {
                'phoenix-method': {
                    title: 'üî• The Phoenix Method: Complete System',
                    content: `
                        <div class="interactive-box" onclick="startPhoenixJourney()">
                            <h3>Start Your Phoenix Journey</h3>
                            <p>Click here to begin your personalized financial recovery plan!</p>
                        </div>
                        
                        <h3 style="margin-top: 30px;">The Four Phases</h3>
                        
                        <div class="guide-card" style="margin: 20px 0;">
                            <h4>Phase 1: Financial Triage (Months 1-3)</h4>
                            <ul style="line-height: 1.8;">
                                <li>Establish post-garnishment baseline income</li>
                                <li>Implement Zero-Based Budget</li>
                                <li>Build $1,000 emergency fund</li>
                                <li>Prioritize Four Walls: Food, Utilities, Shelter, Transportation</li>
                            </ul>
                            <div class="link-tag" onclick="switchTab('income'); closeModal();">Set Up Income</div>
                            <div class="link-tag" onclick="openInteractiveGuide('emergency-fund');">Build Emergency Fund</div>
                        </div>
                        
                        <div class="guide-card" style="margin: 20px 0;">
                            <h4>Phase 2: Credit Comeback (Months 4-12)</h4>
                            <ul style="line-height: 1.8;">
                                <li>Pull all 3 credit reports</li>
                                <li>Dispute errors & send goodwill letters</li>
                                <li>Get secured credit card</li>
                                <li>Apply for credit-builder loan</li>
                            </ul>
                            <div class="link-tag" onclick="openInteractiveGuide('credit-repair');">Credit Recovery Lab</div>
                        </div>
                        
                        <div class="guide-card" style="margin: 20px 0;">
                            <h4>Phase 3: Debt Demolition (Months 6-24)</h4>
                            <ul style="line-height: 1.8;">
                                <li>Choose strategy: Snowball or Avalanche</li>
                                <li>Attack smallest debts first for momentum</li>
                                <li>Then focus on highest interest rates</li>
                                <li>Celebrate every victory!</li>
                            </ul>
                            <div class="link-tag" onclick="openInteractiveGuide('debt');">Debt Calculator</div>
                        </div>
                        
                        <div class="guide-card" style="margin: 20px 0;">
                            <h4>Phase 4: Wealth Building (Ongoing)</h4>
                            <ul style="line-height: 1.8;">
                                <li>Max employer 401k match (free money!)</li>
                                <li>Open Roth IRA ($6,500/year limit)</li>
                                <li>Invest in low-cost index funds (VTI/VT)</li>
                                <li>Let compound interest work its magic</li>
                            </ul>
                            <div class="link-tag" onclick="openInteractiveGuide('investing');">Investment Calculator</div>
                        </div>
                        
                        <div class="calculator-widget" style="margin-top: 30px;">
                            <h3>Your Phoenix Timeline Calculator</h3>
                            <p>Based on your current income of <strong>$${userData.income.toFixed(2)}/month</strong>:</p>
                            <ul style="line-height: 2;">
                                <li>Emergency Fund ($1,000): <strong>${Math.ceil(1000 / (userData.income * 0.1))} months</strong> saving 10%</li>
                                <li>Credit Score 700+: <strong>6-12 months</strong> with consistent payments</li>
                                <li>Debt Freedom: Calculate with our debt tool</li>
                                <li>First $10,000 invested: <strong>${Math.ceil(10000 / (userData.income * 0.15))} months</strong> saving 15%</li>
                            </ul>
                        </div>
                    `
                },
                'emergency-fund': {
                    title: 'üí∞ Interactive Emergency Fund Builder',
                    content: `
                        <div class="calculator-widget">
                            <h3>Your $1,000 Emergency Fund Plan</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>How much can you save per month?</label>
                                    <input type="number" id="emergencySave" placeholder="Even $25 helps!" oninput="calculateEmergencyTimeline()">
                                </div>
                            </div>
                            <div id="emergencyTimeline" style="margin-top: 20px;"></div>
                        </div>
                        
                        <h3 style="margin-top: 30px;">Quick Win Strategies</h3>
                        <div class="interactive-box">
                            <h4>üèÉ The 30-Day Sprint</h4>
                            <ul>
                                <li>Sell everything you don't need</li>
                                <li>Take on extra shifts/gigs</li>
                                <li>Cancel all subscriptions temporarily</li>
                                <li>Eat rice & beans (seriously)</li>
                            </ul>
                        </div>
                        
                        <div class="interactive-box">
                            <h4>üí° Found Money Sources</h4>
                            <ul>
                                <li>Tax refund ‚Üí 100% to emergency fund</li>
                                <li>Bonuses ‚Üí Straight to savings</li>
                                <li>Sell items on Facebook Marketplace</li>
                                <li>Cash back apps & rebates</li>
                            </ul>
                        </div>
                        
                        <h3>Why $1,000?</h3>
                        <p>This amount covers most common emergencies:</p>
                        <ul style="line-height: 1.8;">
                            <li>Car repair: Average $500-800</li>
                            <li>Medical copay/deductible: $250-500</li>
                            <li>Emergency travel: $300-600</li>
                            <li>Home repair: $200-800</li>
                        </ul>
                        
                        <div class="link-tag" onclick="openInteractiveGuide('debt');">Next Step: Debt Elimination</div>
                    `
                },
                'credit-repair': {
                    title: 'üìà Credit Score Recovery Lab',
                    content: `
                        <h3>Your 12-Month Credit Recovery Plan</h3>
                        
                        <div class="progress-container">
                            <div class="progress-header">
                                <span>Months 1-3: Foundation</span>
                            </div>
                            <div class="interactive-box">
                                <ul>
                                    <li>‚òê Pull all 3 credit reports (AnnualCreditReport.com)</li>
                                    <li>‚òê Dispute ALL errors (even small ones)</li>
                                    <li>‚òê Send goodwill letters for late payments</li>
                                    <li>‚òê Apply for credit-builder loan</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-header">
                                <span>Months 4-6: Building</span>
                            </div>
                            <div class="interactive-box">
                                <ul>
                                    <li>‚òê Get secured credit card ($200-500 deposit)</li>
                                    <li>‚òê Become authorized user on trusted account</li>
                                    <li>‚òê Set up autopay for EVERYTHING</li>
                                    <li>‚òê Keep utilization under 10%</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="progress-container">
                            <div class="progress-header">
                                <span>Months 7-12: Optimization</span>
                            </div>
                            <div class="interactive-box">
                                <ul>
                                    <li>‚òê Request credit limit increases (no hard pull)</li>
                                    <li>‚òê Pay down to 1% utilization before statement</li>
                                    <li>‚òê NO new applications</li>
                                    <li>‚òê Monitor scores weekly</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="calculator-widget">
                            <h3>Credit Score Simulator</h3>
                            <p>Estimate your score improvement:</p>
                            <div class="budget-breakdown">
                                <div class="breakdown-item">
                                    <div class="breakdown-label">On-time payments (6 months)</div>
                                    <div class="breakdown-value">+40-60 points</div>
                                </div>
                                <div class="breakdown-item">
                                    <div class="breakdown-label">Lower utilization to 10%</div>
                                    <div class="breakdown-value">+20-30 points</div>
                                </div>
                                <div class="breakdown-item">
                                    <div class="breakdown-label">Add new positive tradeline</div>
                                    <div class="breakdown-value">+10-20 points</div>
                                </div>
                                <div class="breakdown-item">
                                    <div class="breakdown-label">Remove collections</div>
                                    <div class="breakdown-value">+30-100 points</div>
                                </div>
                            </div>
                        </div>
                        
                        <h3>Pro Tips:</h3>
                        <ul style="line-height: 1.8;">
                            <li>üéØ FICO scores matter more than VantageScore</li>
                            <li>üìÖ Payment history is 35% of your score - NEVER miss!</li>
                            <li>üí≥ Utilization is 30% - keep it LOW</li>
                            <li>‚è∞ Age of accounts is 15% - keep old cards open</li>
                            <li>üîÑ Credit mix is 10% - have both cards and loans</li>
                        </ul>
                    `
                },
                'debt': {
                    title: '‚öîÔ∏è Debt Elimination Battle Plan',
                    content: `
                        <h3>Choose Your Weapon</h3>
                        
                        <div class="guide-card" style="cursor: pointer;" onclick="selectDebtStrategy('snowball')">
                            <h4>‚ùÑÔ∏è Debt Snowball</h4>
                            <p>Pay minimums on all debts, attack SMALLEST balance first.</p>
                            <p><strong>Best for:</strong> People who need motivation and quick wins</p>
                            <p><strong>Psychology:</strong> Builds momentum fast!</p>
                        </div>
                        
                        <div class="guide-card" style="cursor: pointer;" onclick="selectDebtStrategy('avalanche')">
                            <h4>üèîÔ∏è Debt Avalanche</h4>
                            <p>Pay minimums on all debts, attack HIGHEST interest rate first.</p>
                            <p><strong>Best for:</strong> Math nerds who want to save the most money</p>
                            <p><strong>Result:</strong> Pay less interest overall</p>
                        </div>
                        
                        <div class="guide-card" style="cursor: pointer; background: linear-gradient(135deg, rgba(255, 107, 53, 0.2), rgba(255, 201, 60, 0.2));">
                            <h4>üî• The Phoenix Snow-Lanche (Hybrid)</h4>
                            <p>Start with 1-2 smallest debts for quick wins, then switch to highest rate.</p>
                            <p><strong>Best for:</strong> Most people - combines psychology and math!</p>
                            <p><strong>Result:</strong> Best of both worlds</p>
                        </div>
                        
                        <div class="calculator-widget">
                            <h3>Debt Freedom Calculator</h3>
                            <p>List your debts to see your payoff timeline:</p>
                            <button class="btn" onclick="addDebtToCalculator()">Add a Debt</button>
                            <div id="debtList" style="margin-top: 20px;"></div>
                        </div>
                        
                        <h3>Acceleration Tactics</h3>
                        <ul style="line-height: 1.8;">
                            <li>üöÄ Any extra money ‚Üí smallest debt</li>
                            <li>üí∞ Sell everything that's not nailed down</li>
                            <li>üçú Beans and rice, rice and beans</li>
                            <li>üéØ Visual progress chart on your fridge</li>
                            <li>üéâ Celebrate EVERY paid-off debt!</li>
                        </ul>
                    `
                },
                'zero-budget': {
                    title: 'üìä Zero-Based Budget Workshop',
                    content: `
                        <h3>Every Dollar Gets a Job!</h3>
                        <p>Income - Expenses = $0 (on purpose!)</p>
                        
                        <div class="calculator-widget">
                            <h3>Build Your Zero-Based Budget</h3>
                            <div class="budget-breakdown">
                                <div class="breakdown-item">
                                    <div class="breakdown-label">Monthly Income</div>
                                    <div class="breakdown-value">$${userData.income.toFixed(2)}</div>
                                </div>
                            </div>
                            
                            <h4 style="margin-top: 20px;">Assign Every Dollar:</h4>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Housing (Rent/Mortgage)</label>
                                    <input type="number" id="zbbHousing" placeholder="0" oninput="updateZBB()">
                                </div>
                                <div class="form-group">
                                    <label>Food/Groceries</label>
                                    <input type="number" id="zbbFood" placeholder="0" oninput="updateZBB()">
                                </div>
                                <div class="form-group">
                                    <label>Transportation</label>
                                    <input type="number" id="zbbTransport" placeholder="0" oninput="updateZBB()">
                                </div>
                                <div class="form-group">
                                    <label>Utilities</label>
                                    <input type="number" id="zbbUtilities" placeholder="0" oninput="updateZBB()">
                                </div>
                            </div>
                            
                            <div class="progress-container" style="margin-top: 20px;">
                                <div class="progress-header">
                                    <span>Remaining to Assign</span>
                                    <span id="zbbRemaining">$${userData.income.toFixed(2)}</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="zbbProgress" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <h3>The Rules:</h3>
                        <ol style="line-height: 1.8;">
                            <li>Start with Four Walls (survival first!)</li>
                            <li>Then minimum debt payments</li>
                            <li>Then other necessities</li>
                            <li>Leftover ‚Üí Emergency fund or debt</li>
                            <li>ZERO dollars unassigned!</li>
                        </ol>
                    `
                },
                'investing': {
                    title: 'üöÄ Investment Basics for Beginners',
                    content: `
                        <h3>The Simple Path to Wealth</h3>
                        
                        <div class="interactive-box">
                            <h4>Priority Order (NEVER skip steps!):</h4>
                            <ol style="line-height: 1.8;">
                                <li>‚úÖ $1,000 Emergency Fund</li>
                                <li>‚úÖ Pay off high-interest debt (>7%)</li>
                                <li>üéØ 401k up to employer match</li>
                                <li>üéØ Max out Roth IRA ($6,500/year)</li>
                                <li>üéØ Max out 401k ($23,000/year)</li>
                                <li>üéØ Taxable investment account</li>
                            </ol>
                        </div>
                        
                        <div class="calculator-widget">
                            <h3>Compound Interest Magic ‚ú®</h3>
                            <p>See how $200/month grows over time:</p>
                            <div class="budget-breakdown">
                                <div class="breakdown-item">
                                    <div class="breakdown-label">10 Years</div>
                                    <div class="breakdown-value">$36,589</div>
                                </div>
                                <div class="breakdown-item">
                                    <div class="breakdown-label">20 Years</div>
                                    <div class="breakdown-value">$117,804</div>
                                </div>
                                <div class="breakdown-item">
                                    <div class="breakdown-label">30 Years</div>
                                    <div class="breakdown-value">$293,509</div>
                                </div>
                                <div class="breakdown-item">
                                    <div class="breakdown-label">40 Years</div>
                                    <div class="breakdown-value">$622,019</div>
                                </div>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem;">*Assumes 8% annual return</p>
                        </div>
                        
                        <h3>The One-Fund Portfolio</h3>
                        <p>Keep it simple! Choose ONE:</p>
                        <ul style="line-height: 1.8;">
                            <li>üá∫üá∏ <strong>VTI</strong> - Total US Stock Market (3,800+ companies)</li>
                            <li>üåç <strong>VT</strong> - Total World Stock (9,000+ companies)</li>
                            <li>üìÖ <strong>Target-Date Fund</strong> - Set it and forget it</li>
                        </ul>
                        
                        <h3>Roth IRA Secret Weapon</h3>
                        <div class="interactive-box">
                            <p>üí° You can withdraw CONTRIBUTIONS anytime, tax-free!</p>
                            <p>This makes it a backup emergency fund while growing tax-free forever.</p>
                        </div>
                        
                        <h3>Getting Started:</h3>
                        <ol style="line-height: 1.8;">
                            <li>Open account at Vanguard, Fidelity, or Schwab</li>
                            <li>Start with even $25/month</li>
                            <li>Buy VTI or VT</li>
                            <li>Set up automatic investing</li>
                            <li>Don't touch it for 10+ years</li>
                            <li>Thank yourself later!</li>
                        </ol>
                    `
                }
            };
            
            const guideData = guides[guide];
            if (!guideData) return;
            
            content.innerHTML = `
                <h2 style="color: var(--phoenix-yellow); margin-bottom: 20px;">${guideData.title}</h2>
                ${guideData.content}
            `;
            
            modal.classList.add('active');
        }

        // Progress tracking
        function updateProgress() {
            // Calculate emergency fund progress
            const emergencyGoal = 1000;
            const emergencyProgress = userData.progress.emergencyFund || 0;
            const emergencyPercent = (emergencyProgress / emergencyGoal) * 100;
            
            document.getElementById('emergencyProgress').textContent = `$${emergencyProgress} / $${emergencyGoal}`;
            document.getElementById('emergencyBar').style.width = `${emergencyPercent}%`;
            
            // Budget completion
            const budgetPercent = userData.expenses.length > 0 ? 100 : 0;
            document.getElementById('budgetProgress').textContent = `${budgetPercent}%`;
            document.getElementById('budgetBar').style.width = `${budgetPercent}%`;
            
            // Guides completed
            const guidesCompleted = userData.progress.guidesCompleted?.length || 0;
            const guidesPercent = (guidesCompleted / 6) * 100;
            document.getElementById('guidesProgress').textContent = `${guidesCompleted} / 6`;
            document.getElementById('guidesBar').style.width = `${guidesPercent}%`;
        }

        // Helper functions
        function calculateEmergencyTimeline() {
            const monthly = parseFloat(document.getElementById('emergencySave').value);
            if (!monthly) return;
            
            const months = Math.ceil(1000 / monthly);
            document.getElementById('emergencyTimeline').innerHTML = `
                <div class="calculator-result">
                    You'll have $1,000 in <span style="color: var(--success);">${months} months!</span>
                </div>
                <p>That's just ${(months * 30).toFixed(0)} days away!</p>
            `;
        }

        function updateZBB() {
            const income = userData.income;
            const housing = parseFloat(document.getElementById('zbbHousing').value) || 0;
            const food = parseFloat(document.getElementById('zbbFood').value) || 0;
            const transport = parseFloat(document.getElementById('zbbTransport').value) || 0;
            const utilities = parseFloat(document.getElementById('zbbUtilities').value) || 0;
            
            const total = housing + food + transport + utilities;
            const remaining = income - total;
            const percent = (total / income) * 100;
            
            document.getElementById('zbbRemaining').textContent = `$${remaining.toFixed(2)}`;
            document.getElementById('zbbProgress').style.width = `${percent}%`;
            
            if (remaining < 0) {
                document.getElementById('zbbRemaining').style.color = 'var(--danger)';
            } else if (remaining === 0) {
                document.getElementById('zbbRemaining').style.color = 'var(--success)';
            } else {
                document.getElementById('zbbRemaining').style.color = 'var(--phoenix-yellow)';
            }
        }

        // Close modal
        function closeModal() {
            document.getElementById('guideModal').classList.remove('active');
        }

        // Notifications
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.5s ease';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        // Background animation
        function initBackground() {
            new p5((sketch) => {
                let particles = [];
                
                sketch.setup = () => {
                    let canvas = sketch.createCanvas(sketch.windowWidth, sketch.windowHeight);
                    canvas.parent('bgCanvas');
                    
                    for (let i = 0; i < 20; i++) {
                        particles.push({
                            x: sketch.random(sketch.width),
                            y: sketch.random(sketch.height),
                            size: sketch.random(2, 4),
                            speedX: sketch.random(-0.3, 0.3),
                            speedY: sketch.random(-0.3, 0.3)
                        });
                    }
                };
                
                sketch.draw = () => {
                    sketch.clear();
                    
                    particles.forEach(p => {
                        sketch.noStroke();
                        sketch.fill(255, 107, 53, 50);
                        sketch.ellipse(p.x, p.y, p.size);
                        
                        p.x += p.speedX;
                        p.y += p.speedY;
                        
                        if (p.x < 0 || p.x > sketch.width) p.speedX *= -1;
                        if (p.y < 0 || p.y > sketch.height) p.speedY *= -1;
                    });
                    
                    // Draw connections
                    for (let i = 0; i < particles.length; i++) {
                        for (let j = i + 1; j < particles.length; j++) {
                            let d = sketch.dist(particles[i].x, particles[i].y, particles[j].x, particles[j].y);
                            if (d < 100) {
                                sketch.stroke(255, 107, 53, 20 * (1 - d/100));
                                sketch.line(particles[i].x, particles[i].y, particles[j].x, particles[j].y);
                            }
                        }
                    }
                };
                
                sketch.windowResized = () => {
                    sketch.resizeCanvas(sketch.windowWidth, sketch.windowHeight);
                };
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadUserData();
            initBackground();
            renderExpenses();
        });

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>